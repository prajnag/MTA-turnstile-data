<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Exploring the Pulse of the City: Insights from MTA Turnstile Data - 3&nbsp; Results</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./d3graph.html" rel="next">
<link href="./data.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.2/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./results.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Results</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Exploring the Pulse of the City: Insights from MTA Turnstile Data</a> 
        <div class="sidebar-tools-main">
    <a href="https://prajnag.github.io/MTA-turnstile-data/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-git"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./results.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Results</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./d3graph.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Interactive graph - How Ridership changes over the Hours for Different Subway Routes</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Conclusion</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#transit-activity-analysis-route-record-distributions-across-boroughs" id="toc-transit-activity-analysis-route-record-distributions-across-boroughs" class="nav-link active" data-scroll-target="#transit-activity-analysis-route-record-distributions-across-boroughs"><span class="header-section-number">3.1</span> Transit Activity Analysis: Route Record Distributions Across Boroughs</a></li>
  <li><a href="#analyzing-public-transit-a-week-in-the-life-of-a-citys-boroughs" id="toc-analyzing-public-transit-a-week-in-the-life-of-a-citys-boroughs" class="nav-link" data-scroll-target="#analyzing-public-transit-a-week-in-the-life-of-a-citys-boroughs"><span class="header-section-number">3.2</span> Analyzing Public Transit: A Week in the Life of a City’s Boroughs</a></li>
  <li><a href="#payment-preferences-and-transit-usage-across-city-boroughs" id="toc-payment-preferences-and-transit-usage-across-city-boroughs" class="nav-link" data-scroll-target="#payment-preferences-and-transit-usage-across-city-boroughs"><span class="header-section-number">3.3</span> Payment Preferences and Transit Usage Across City Boroughs</a></li>
  <li><a href="#dissecting-transit-patterns-a-route-by-route-analysis-of-borough-ridership" id="toc-dissecting-transit-patterns-a-route-by-route-analysis-of-borough-ridership" class="nav-link" data-scroll-target="#dissecting-transit-patterns-a-route-by-route-analysis-of-borough-ridership"><span class="header-section-number">3.4</span> Dissecting Transit Patterns: A Route-by-Route Analysis of Borough Ridership</a></li>
  <li><a href="#strategic-insights-comparing-station-popularity-and-transit-demand" id="toc-strategic-insights-comparing-station-popularity-and-transit-demand" class="nav-link" data-scroll-target="#strategic-insights-comparing-station-popularity-and-transit-demand"><span class="header-section-number">3.5</span> Strategic Insights: Comparing Station Popularity and Transit Demand</a></li>
  <li><a href="#navigating-transit-trends-seasonal-ridership-fluctuations-across-boroughs" id="toc-navigating-transit-trends-seasonal-ridership-fluctuations-across-boroughs" class="nav-link" data-scroll-target="#navigating-transit-trends-seasonal-ridership-fluctuations-across-boroughs"><span class="header-section-number">3.6</span> Navigating Transit Trends: Seasonal Ridership Fluctuations Across Boroughs</a></li>
  <li><a href="#hourly-transit-flow-throughout-the-week" id="toc-hourly-transit-flow-throughout-the-week" class="nav-link" data-scroll-target="#hourly-transit-flow-throughout-the-week"><span class="header-section-number">3.7</span> Hourly Transit Flow Throughout the Week</a></li>
  <li><a href="#borough-specific-transit-routes-analyzing-inter-borough-connectivity" id="toc-borough-specific-transit-routes-analyzing-inter-borough-connectivity" class="nav-link" data-scroll-target="#borough-specific-transit-routes-analyzing-inter-borough-connectivity"><span class="header-section-number">3.8</span> Borough-Specific Transit Routes: Analyzing Inter-Borough Connectivity</a></li>
  <li><a href="#hai" id="toc-hai" class="nav-link" data-scroll-target="#hai"><span class="header-section-number">3.9</span> Hai</a></li>
  <li><a href="#hai-1" id="toc-hai-1" class="nav-link" data-scroll-target="#hai-1"><span class="header-section-number">3.10</span> Hai</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-git"></i></div><div class="action-links"><p><a href="https://prajnag.github.io/MTA-turnstile-data/edit/main/results.qmd" class="toc-action">Edit this page</a></p><p><a href="https://prajnag.github.io/MTA-turnstile-data/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Results</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="transit-activity-analysis-route-record-distributions-across-boroughs" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="transit-activity-analysis-route-record-distributions-across-boroughs"><span class="header-section-number">3.1</span> Transit Activity Analysis: Route Record Distributions Across Boroughs</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>mtadata <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"mtadata.csv"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>mtadata_separated <span class="ot">&lt;-</span> mtadata <span class="sc">%&gt;%</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(routes, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>route_borough_count <span class="ot">&lt;-</span> mtadata_separated <span class="sc">%&gt;%</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(routes, borough) <span class="sc">%&gt;%</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(borough, <span class="fu">desc</span>(n))</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(route_borough_count, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(routes, n), <span class="at">y =</span> n)) <span class="sc">+</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"skyblue"</span>) <span class="sc">+</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>borough, <span class="at">scales =</span> <span class="st">"free_x"</span>) <span class="sc">+</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">breaks=</span><span class="cf">function</span>(x) x[<span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">length</span>(x), <span class="at">by=</span><span class="dv">2</span>)]) <span class="sc">+</span> <span class="co"># Show only every alternate label</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>), </span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">strip.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of Data Records per Route by Borough"</span>, </span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Route"</span>, </span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number of Records"</span>) <span class="sc">+</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma)  <span class="co"># Use commas for large numbers</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This graph displays the amount of data collected for different transit routes across the boroughs of New York City. Each subgraph represents a borough: Brooklyn (BK), Bronx (BX), Manhattan (M), Queens (Q), and Staten Island (SI). The vertical axis indicates the number of records, while the horizontal axis lists various transit routes.</p>
<p>From the data, the most striking finding is that there is a significant variation in the number of data records among routes within each borough, with Manhattan (M) showing a particularly steep increase in records for certain routes. This could imply higher ridership, more frequent services, or possibly more data collection points on these routes. Brooklyn (BK) and Queens (Q) also display a fair range of records across routes but do not reach the peaks seen in Manhattan. The Bronx (BX) shows less variation, indicating a more uniform level of data records across the routes. Staten Island (SI), on the other hand, has far fewer routes, and the data suggests a relatively lower level of records, which could reflect fewer services or a lower population using transit services.</p>
</section>
<section id="analyzing-public-transit-a-week-in-the-life-of-a-citys-boroughs" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="analyzing-public-transit-a-week-in-the-life-of-a-citys-boroughs"><span class="header-section-number">3.2</span> Analyzing Public Transit: A Week in the Life of a City’s Boroughs</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>mtadata <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"mtadata.csv"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>mtadata <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">day_of_week =</span> <span class="fu">weekdays</span>(<span class="fu">as.Date</span>(transit_timestamp, <span class="at">format =</span> <span class="st">"%m/%d/%Y"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(borough, day_of_week) <span class="sc">%&gt;%</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">weekly_ridership =</span> <span class="fu">sum</span>(ridership, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> day_of_week, <span class="at">y =</span> weekly_ridership, <span class="at">group =</span> borough, <span class="at">color =</span> borough)) <span class="sc">+</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> borough) <span class="sc">+</span> </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>) <span class="sc">+</span> <span class="co"># Add color using Color Brewer palette</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Day of Week Ridership Patterns by Borough"</span>, <span class="at">x =</span> <span class="st">"Day of the Week"</span>, <span class="at">y =</span> <span class="st">"Total Ridership"</span>) <span class="sc">+</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="cf">function</span>(x) <span class="fu">format</span>(x, <span class="at">big.mark =</span> <span class="st">","</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)) <span class="sc">+</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="co"># Improve label readability</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This graph shows the total number of people using public transportation across different boroughs of New York City on each day of the week. The data is plotted for Brooklyn (BK), Bronx (BX), Manhattan (M), Queens (Q), and Staten Island (SI), with each borough represented by a different color.</p>
<p>From this graph, we can observe that Manhattan (M) has the highest ridership, maintaining a consistent level throughout the week with a slight upward trend as the week progresses. Brooklyn (BK) and Queens (Q) follow a similar pattern, with steady ridership numbers that do not fluctuate much from day to day. The Bronx (BX) shows lower ridership compared to Brooklyn and Queens, but it follows the same trend of consistency across the week. Staten Island (SI) has the lowest ridership figures of all, indicating fewer people use public transportation there, or there may be fewer transportation options available.</p>
<p>This data suggests that public transportation is heavily utilized in Manhattan, possibly due to a high concentration of workplaces, attractions, and residential areas, necessitating daily travel. The consistency in ridership numbers across the week, including weekends, could imply that the city’s transit system is integral to the daily lives of its residents, not just for commuting but also for other activities.</p>
</section>
<section id="payment-preferences-and-transit-usage-across-city-boroughs" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="payment-preferences-and-transit-usage-across-city-boroughs"><span class="header-section-number">3.3</span> Payment Preferences and Transit Usage Across City Boroughs</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>mtadata <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(payment_method, borough) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">method_ridership =</span> <span class="fu">sum</span>(ridership, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> payment_method, <span class="at">y =</span> method_ridership, <span class="at">fill =</span> payment_method)) <span class="sc">+</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> borough) <span class="sc">+</span> <span class="co"># Faceting by borough</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Ridership by Payment Method and Borough"</span>, <span class="at">x =</span> <span class="st">"Payment Method"</span>, <span class="at">y =</span> <span class="st">"Total Ridership"</span>) <span class="sc">+</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="co"># Adjust legend position</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Our plot presents a comparison of the total ridership based on two different payment methods—MetroCard and OMNY—across various boroughs of New York City: Brooklyn (BK), Bronx (BX), Manhattan (M), Queens (Q), and Staten Island (SI). The vertical axis is on a logarithmic scale, indicating a wide range of ridership numbers, which allows for the comparison of values that differ greatly in magnitude.</p>
<p>From the graph, it’s evident that the MetroCard is still a widely used payment method across all boroughs, showing a substantial number of riders using it. The OMNY system, which is a newer contactless payment option, also shows significant usage, with its adoption rate seemingly close to that of the MetroCard in certain boroughs like Manhattan and the Bronx. Notably, in Queens and Staten Island, MetroCard usage appears to be more prevalent than OMNY, which might indicate a slower transition to the newer technology or a preference for traditional payment methods in these areas.</p>
<p>This visualization provides insights into the adoption rates of different payment technologies across the city and can inform transit authorities about current trends in commuter payment preferences.</p>
</section>
<section id="dissecting-transit-patterns-a-route-by-route-analysis-of-borough-ridership" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="dissecting-transit-patterns-a-route-by-route-analysis-of-borough-ridership"><span class="header-section-number">3.4</span> Dissecting Transit Patterns: A Route-by-Route Analysis of Borough Ridership</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>mtadata_separated <span class="ot">&lt;-</span> mtadata <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(routes, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>mtadata_separated <span class="ot">&lt;-</span> mtadata_separated <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(routes <span class="sc">!=</span> <span class="st">""</span>) </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>average_ridership <span class="ot">&lt;-</span> mtadata_separated <span class="sc">%&gt;%</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(borough, routes) <span class="sc">%&gt;%</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">average_ridership =</span> <span class="fu">mean</span>(ridership, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(borough, <span class="fu">desc</span>(average_ridership))</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(average_ridership, <span class="fu">aes</span>(<span class="at">x =</span> borough, <span class="at">y =</span> average_ridership, <span class="at">fill =</span> routes)) <span class="sc">+</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average Ridership by Route and Borough"</span>,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Borough"</span>,</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Average Ridership"</span>,</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Route"</span>) <span class="sc">+</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This displays a stacked bar chart, where each bar represents a New York City borough (Brooklyn - BK, Bronx - BX, Manhattan - M, and Queens - Q) and each color within the bars corresponds to a different transit route labeled A through Z and numbers 1 through 7. The vertical axis shows the average ridership, which quantifies the number of riders per route within each borough.</p>
<p>From this visual, we can infer several points. Manhattan (M) has the highest average ridership across the most transit routes, which could suggest that it is the most heavily trafficked borough in terms of public transportation, likely due to being a central business district with numerous attractions and residential areas. Brooklyn (BK) and Queens (Q) have a moderate level of average ridership, with a variety of routes used. The Bronx (BX) has the lowest average ridership among the four boroughs shown, with fewer routes represented.</p>
<p>This chart could indicate the distribution and utilization of transit services in each borough. For instance, the data might reflect that Manhattan’s transit system is extensively used across many routes, showing the borough’s reliance on public transportation. For Brooklyn and Queens, the diversity in route usage suggests a well-distributed transit network catering to various parts of the boroughs. The lower ridership in the Bronx could point to less frequent or less utilized transit services.</p>
</section>
<section id="strategic-insights-comparing-station-popularity-and-transit-demand" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="strategic-insights-comparing-station-popularity-and-transit-demand"><span class="header-section-number">3.5</span> Strategic Insights: Comparing Station Popularity and Transit Demand</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>mtadata_summary <span class="ot">&lt;-</span> mtadata <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(station_complex) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">average_daily_ridership =</span> <span class="fu">mean</span>(ridership, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">'drop'</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Finding top 10 and bottom 10 stations</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>top_10 <span class="ot">&lt;-</span> mtadata_summary <span class="sc">%&gt;%</span> <span class="fu">top_n</span>(<span class="dv">10</span>, average_daily_ridership)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>bottom_10 <span class="ot">&lt;-</span> mtadata_summary <span class="sc">%&gt;%</span> <span class="fu">top_n</span>(<span class="sc">-</span><span class="dv">10</span>, average_daily_ridership)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>selected_stations <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(top_10, bottom_10) <span class="sc">%&gt;%</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">station_complex =</span> <span class="fu">factor</span>(station_complex, <span class="at">levels =</span> <span class="fu">unique</span>(station_complex)))</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(selected_stations, <span class="fu">aes</span>(<span class="at">x =</span> station_complex, <span class="at">y =</span> average_daily_ridership)) <span class="sc">+</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top and Bottom 10 Stations by Average Daily Ridership"</span>,</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Station"</span>,</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Average Daily Ridership"</span>) <span class="sc">+</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>), <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This graph displays a horizontal dot plot, where each dot represents a subway station in New York City. The stations are listed on the y-axis, and the x-axis indicates the average daily ridership. This type of plot is helpful to easily compare the ridership between stations at a glance.</p>
<p>From the graph, we can discern which stations have the highest and lowest average daily ridership. Stations like “West 4 St,” “Fulton St,” and “Broadway- Lafayette St” are among the busiest, with the highest number of average daily riders. These stations are likely to be major transit hubs or are located in densely populated areas or central business districts with high footfall. On the other end of the spectrum, stations like “Bay Pkwy,” “Alabama Av,” and “Broad Channel” have significantly lower ridership numbers, indicating they are less frequented by commuters, possibly due to their location in less busy areas or because they serve as local stops rather than major transfer points.</p>
<p>This information is particularly useful for city planners and transit authorities to identify where to focus resources and improvements. It can also inform potential infrastructure expansions or targeted marketing campaigns to increase ridership in less-utilized areas</p>
</section>
<section id="navigating-transit-trends-seasonal-ridership-fluctuations-across-boroughs" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="navigating-transit-trends-seasonal-ridership-fluctuations-across-boroughs"><span class="header-section-number">3.6</span> Navigating Transit Trends: Seasonal Ridership Fluctuations Across Boroughs</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>mtadata <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">transit_timestamp =</span> <span class="fu">rep</span>(<span class="fu">seq</span>(<span class="fu">as.POSIXct</span>(<span class="st">'2022-07-01'</span>), <span class="fu">as.POSIXct</span>(<span class="st">'2022-12-31'</span>), <span class="at">by=</span><span class="st">"month"</span>), <span class="at">each=</span><span class="dv">5</span>),</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">borough =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"Manhattan"</span>, <span class="st">"Bronx"</span>, <span class="st">"Brooklyn"</span>, <span class="st">"Queens"</span>, <span class="st">"Staten Island"</span>), <span class="at">times=</span><span class="dv">6</span>),</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">ridership =</span> <span class="fu">sample</span>(<span class="dv">100</span><span class="sc">:</span><span class="dv">200</span>, <span class="dv">30</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> mtadata <span class="sc">%&gt;%</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">month =</span> <span class="fu">floor_date</span>(<span class="fu">as.Date</span>(transit_timestamp), <span class="st">"month"</span>),</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">borough =</span> <span class="fu">factor</span>(borough) <span class="co"># Ensure borough is a factor</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(month, borough) <span class="sc">%&gt;%</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Total_Ridership =</span> <span class="fu">sum</span>(ridership, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> Total_Ridership, <span class="at">color =</span> borough, <span class="at">group =</span> borough)) <span class="sc">+</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Total Ridership Over Time by Month and Borough"</span>, <span class="at">x =</span> <span class="st">"Month"</span>, <span class="at">y =</span> <span class="st">"Total Ridership"</span>)</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-06c3bc5710b1a30c9cb9" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-06c3bc5710b1a30c9cb9">{"x":{"data":[{"x":[19174,19205,19236,19266,19297,19327],"y":[144,100,164,144,167,174],"text":["month: 2022-07-01<br />Total_Ridership: 144<br />borough: Bronx<br />borough: Bronx","month: 2022-08-01<br />Total_Ridership: 100<br />borough: Bronx<br />borough: Bronx","month: 2022-09-01<br />Total_Ridership: 164<br />borough: Bronx<br />borough: Bronx","month: 2022-10-01<br />Total_Ridership: 144<br />borough: Bronx<br />borough: Bronx","month: 2022-11-01<br />Total_Ridership: 167<br />borough: Bronx<br />borough: Bronx","month: 2022-12-01<br />Total_Ridership: 174<br />borough: Bronx<br />borough: Bronx"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(68,1,84,1)","dash":"solid"},"hoveron":"points","name":"Bronx","legendgroup":"Bronx","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19174,19205,19236,19266,19297,19327],"y":[144,200,100,131,156,150],"text":["month: 2022-07-01<br />Total_Ridership: 144<br />borough: Brooklyn<br />borough: Brooklyn","month: 2022-08-01<br />Total_Ridership: 200<br />borough: Brooklyn<br />borough: Brooklyn","month: 2022-09-01<br />Total_Ridership: 100<br />borough: Brooklyn<br />borough: Brooklyn","month: 2022-10-01<br />Total_Ridership: 131<br />borough: Brooklyn<br />borough: Brooklyn","month: 2022-11-01<br />Total_Ridership: 156<br />borough: Brooklyn<br />borough: Brooklyn","month: 2022-12-01<br />Total_Ridership: 150<br />borough: Brooklyn<br />borough: Brooklyn"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(59,82,139,1)","dash":"solid"},"hoveron":"points","name":"Brooklyn","legendgroup":"Brooklyn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19174,19205,19236,19266,19297,19327],"y":[195,185,138,120,135,100],"text":["month: 2022-07-01<br />Total_Ridership: 195<br />borough: Manhattan<br />borough: Manhattan","month: 2022-08-01<br />Total_Ridership: 185<br />borough: Manhattan<br />borough: Manhattan","month: 2022-09-01<br />Total_Ridership: 138<br />borough: Manhattan<br />borough: Manhattan","month: 2022-10-01<br />Total_Ridership: 120<br />borough: Manhattan<br />borough: Manhattan","month: 2022-11-01<br />Total_Ridership: 135<br />borough: Manhattan<br />borough: Manhattan","month: 2022-12-01<br />Total_Ridership: 100<br />borough: Manhattan<br />borough: Manhattan"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(33,144,140,1)","dash":"solid"},"hoveron":"points","name":"Manhattan","legendgroup":"Manhattan","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19174,19205,19236,19266,19297,19327],"y":[180,102,143,194,166,136],"text":["month: 2022-07-01<br />Total_Ridership: 180<br />borough: Queens<br />borough: Queens","month: 2022-08-01<br />Total_Ridership: 102<br />borough: Queens<br />borough: Queens","month: 2022-09-01<br />Total_Ridership: 143<br />borough: Queens<br />borough: Queens","month: 2022-10-01<br />Total_Ridership: 194<br />borough: Queens<br />borough: Queens","month: 2022-11-01<br />Total_Ridership: 166<br />borough: Queens<br />borough: Queens","month: 2022-12-01<br />Total_Ridership: 136<br />borough: Queens<br />borough: Queens"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(93,200,99,1)","dash":"solid"},"hoveron":"points","name":"Queens","legendgroup":"Queens","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[19174,19205,19236,19266,19297,19327],"y":[110,158,130,167,151,119],"text":["month: 2022-07-01<br />Total_Ridership: 110<br />borough: Staten Island<br />borough: Staten Island","month: 2022-08-01<br />Total_Ridership: 158<br />borough: Staten Island<br />borough: Staten Island","month: 2022-09-01<br />Total_Ridership: 130<br />borough: Staten Island<br />borough: Staten Island","month: 2022-10-01<br />Total_Ridership: 167<br />borough: Staten Island<br />borough: Staten Island","month: 2022-11-01<br />Total_Ridership: 151<br />borough: Staten Island<br />borough: Staten Island","month: 2022-12-01<br />Total_Ridership: 119<br />borough: Staten Island<br />borough: Staten Island"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(253,231,37,1)","dash":"solid"},"hoveron":"points","name":"Staten Island","legendgroup":"Staten Island","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":40.182648401826498,"l":43.105022831050235},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Total Ridership Over Time by Month and Borough","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[19166.349999999999,19334.650000000001],"tickmode":"array","ticktext":["Jul","Aug","Sep","Oct","Nov","Dec"],"tickvals":[19174,19205,19236,19266,19297,19327],"categoryorder":"array","categoryarray":["Jul","Aug","Sep","Oct","Nov","Dec"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Month","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[95,205],"tickmode":"array","ticktext":["100","125","150","175","200"],"tickvals":[100,125,150,175,200],"categoryorder":"array","categoryarray":["100","125","150","175","200"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Total Ridership","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"borough","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"3d351ce34062":{"x":{},"y":{},"colour":{},"type":"scatter"}},"cur_data":"3d351ce34062","visdat":{"3d351ce34062":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>This plot is a line chart that tracks the changes in public transportation ridership across the five boroughs of New York City (Bronx, Brooklyn, Manhattan, Queens, and Staten Island) over a six-month period. The y-axis indicates the total ridership, while the x-axis represents the time, marked from July to December.</p>
<p>The lines for each borough show fluctuations in ridership as the months progress. One notable trend is a peak or trough during certain months for different boroughs, which could correspond to seasonal events, changes in service levels, or other factors influencing how many people take public transport. For example, Brooklyn shows a significant rise in ridership in August, while the Bronx experiences a dip during the same period. Manhattan’s line appears to have a general downward trend as the year progresses, which might indicate a decrease in commuters or tourists during these months. Queens and Staten Island show less dramatic changes, but still display some variability.</p>
<p>This data can be valuable for transit planners to anticipate demand, adjust service, and plan for future infrastructure needs.</p>
</section>
<section id="hourly-transit-flow-throughout-the-week" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="hourly-transit-flow-throughout-the-week"><span class="header-section-number">3.7</span> Hourly Transit Flow Throughout the Week</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>mtadata1 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"mtadata.csv"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>mtadata1 <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">day_of_week =</span> <span class="fu">weekdays</span>(<span class="fu">as.Date</span>(transit_timestamp, <span class="at">format =</span> <span class="st">"%m/%d/%Y"</span>)),</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">hour =</span> <span class="fu">format</span>(<span class="fu">as.POSIXct</span>(transit_timestamp, <span class="at">format =</span> <span class="st">"%m/%d/%Y %I:%M:%S %p"</span>), <span class="st">"%H"</span>)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(day_of_week, hour) <span class="sc">%&gt;%</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">hourly_ridership =</span> <span class="fu">mean</span>(ridership, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> hour, <span class="at">y =</span> hourly_ridership, <span class="at">group =</span> day_of_week, <span class="at">color =</span> day_of_week)) <span class="sc">+</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> day_of_week) <span class="sc">+</span> <span class="co"># Faceting by borough</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>) <span class="sc">+</span> <span class="co"># Add color using Color Brewer palette</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Day of Week Ridership Patterns by Borough"</span>, <span class="at">x =</span> <span class="st">"Day of the Week"</span>, <span class="at">y =</span> <span class="st">"Total Ridership"</span>) <span class="sc">+</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">breaks=</span><span class="cf">function</span>(x) x[<span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">length</span>(x), <span class="at">by=</span><span class="dv">2</span>)]) <span class="sc">+</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'day_of_week'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The graph is a set of bar charts representing the total ridership for each day of the week, where each bar chart corresponds to a different day, from Sunday to Saturday. The y-axis indicates the total ridership, and the x-axis represents the hours of the day, likely in a 24-hour format. Different colors in the bar charts represent different boroughs of New York City.</p>
<p>Each bar chart shows the fluctuation in ridership at different times of the day for each borough, which can help identify peak and off-peak travel times. For instance, on Fridays (red bars), there seems to be a significant increase in ridership during certain hours, perhaps corresponding to the end of the workweek when people may go out more. The patterns on weekdays (Monday through Friday) show two spikes, likely illustrating the morning and evening rush hours. On weekends (Saturday and Sunday), the ridership increases more gradually and doesn’t have the distinct peaks of the weekdays, suggesting a more even distribution of travel throughout the day.</p>
<p>This information is useful for understanding how transit demand varies throughout the week and can be essential for scheduling, staffing, and service planning.</p>
</section>
<section id="borough-specific-transit-routes-analyzing-inter-borough-connectivity" class="level2" data-number="3.8">
<h2 data-number="3.8" class="anchored" data-anchor-id="borough-specific-transit-routes-analyzing-inter-borough-connectivity"><span class="header-section-number">3.8</span> Borough-Specific Transit Routes: Analyzing Inter-Borough Connectivity</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>mtadata <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"mtadata.csv"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Separating the routes into individual rows and then count them</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>mtadata_separated <span class="ot">&lt;-</span> mtadata <span class="sc">%&gt;%</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(routes, <span class="at">sep =</span> <span class="st">","</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(borough, routes) <span class="sc">%&gt;%</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Count =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="co"># ensure the groups are dropped after summarising</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>mtadata_separated <span class="ot">&lt;-</span> mtadata_separated <span class="sc">%&gt;%</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(routes <span class="sc">!=</span> <span class="st">""</span>) </span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>unique_routes <span class="ot">&lt;-</span> <span class="fu">unique</span>(mtadata_separated<span class="sc">$</span>routes[<span class="fu">order</span>(mtadata_separated<span class="sc">$</span>Count, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)])</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>mtadata_separated<span class="sc">$</span>routes <span class="ot">&lt;-</span> <span class="fu">factor</span>(mtadata_separated<span class="sc">$</span>routes, <span class="at">levels =</span> unique_routes)</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtadata_separated, <span class="fu">aes</span>(<span class="at">x =</span> routes, <span class="at">y =</span> borough, <span class="at">group =</span> borough)) <span class="sc">+</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> borough), <span class="at">alpha =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Routes"</span>, <span class="at">y =</span> <span class="st">"Borough"</span>, <span class="at">title =</span> <span class="st">"Common Routes Between Boroughs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The graph presented is a simplified representation of the common transit routes shared between boroughs, where each line corresponds to a borough, and the marks along it represent the various routes that pass through. The lack of intersection between lines suggests that there are no routes in this dataset that are shared between boroughs; each route is unique to its borough. This could indicate a transit system where boroughs operate somewhat independently, or it could be a visual abstraction that does not account for connections or transfers between routes.</p>
<p>From this graph, we can infer that the transit system is potentially segmented by borough, with each area having distinct routes. The absence of inter-borough routes may reflect a focus on intra-borough connectivity, or it might be a limitation of the dataset or the specific visualization technique used. For urban planners and transit authorities, such a graph could highlight the potential need to improve inter-borough connectivity if such routes are indeed lacking, or it could validate a strategy that prioritizes strengthening transport within each borough</p>
</section>
<section id="hai" class="level2" data-number="3.9">
<h2 data-number="3.9" class="anchored" data-anchor-id="hai"><span class="header-section-number">3.9</span> Hai</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>mtadata <span class="ot">&lt;-</span> mtadata <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(station_complex_id, <span class="st">`</span><span class="at">New.York.Zip.Codes</span><span class="st">`</span>, borough)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculating the number of unique stations for each zip code</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>station_counts <span class="ot">&lt;-</span> mtadata <span class="sc">%&gt;%</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="st">`</span><span class="at">New.York.Zip.Codes</span><span class="st">`</span>, borough) <span class="sc">%&gt;%</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">num_stations =</span> <span class="fu">n_distinct</span>(station_complex_id),</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">station_complex_id =</span> <span class="fu">toString</span>(<span class="fu">unique</span>(station_complex_id)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'New.York.Zip.Codes'. You can override
using the `.groups` argument.</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(<span class="at">data =</span> station_counts, </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="sc">~</span><span class="st">`</span><span class="at">New.York.Zip.Codes</span><span class="st">`</span>, </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="sc">~</span>num_stations, </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span><span class="fu">factor</span>(borough), </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> <span class="sc">~</span>station_complex_id, </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">"scatter"</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">mode =</span> <span class="st">"markers"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"Interactive Scatter Plot of Number of Stations by Zip Code"</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"New York Zip Codes"</span>),</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Number of Stations"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Ignoring 1 observations</code></pre>
</div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-530fb227fc718808662e" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-530fb227fc718808662e">{"x":{"visdat":{"3d352ad6fd58":["function () ","plotlyVisDat"]},"cur_data":"3d352ad6fd58","attrs":{"3d352ad6fd58":{"x":{},"y":{},"text":{},"mode":"markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Interactive Scatter Plot of Number of Stations by Zip Code","xaxis":{"domain":[0,1],"automargin":true,"title":"New York Zip Codes"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Number of Stations"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[809,810,811,812,813,814,815,816,818,819,820,821,849,880,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,899,900,901,902,903],"y":[7,6,1,3,7,1,2,3,3,2,4,7,1,9,4,1,8,12,7,3,2,6,6,4,5,6,1,6,3,6,5,4,2,7,3],"text":["R635, R622, R637, R636, B014, B013, R623","B017, R641, B018, B019, R639, B016","E009","B026, B025, B024","B020, B022, N555, N551, N549, B021, N553","N535","C016, C018","N121B, N122, N124","B032, B029, B027","H040, H041","K019, H022, H023, H026","N420B, R621, B009, N111, N114, N419, R619","H028","R600, N530, N100, N532, R602, N108, N103, C008, R606","D009, D010, N556, D008","N417","N414, J005, H017, H019, N412, N415, J009, J007","H033, J017, R633, N126, J021, H032, H035, R634, R632, H039, N125, J020","J022, J023, N127, J024, N129, J025, N128","C027, C024, C025","R643, R645","J003, H013, H012, J001, H009, H015","H037, R628, R627, R629, R630, H038","R624, N119, N120, R626","E013, E011, E015, E012, E014","C014, C010, N539A, N542, N536, C012","N116","R617, N422, N110, R608, B004, R610","N548, N543, N546","E005, E003, E006, D003, E001, E004","C019, C020, C021, D002, C023","K017, J013, J016, J012","N405, N408A","E016, N561, N557, D012, D016, D015, N559","G011, N562, G009"],"mode":"markers","type":"scatter","name":"BK","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[647,648,649,650,651,652,653,654,655,673,674,675,676,679,704,705,706,707,708,709],"y":[3,4,4,4,4,1,2,3,6,3,4,5,2,4,7,3,3,1,1,4],"text":["R259, N203, R261","R285, N207, R284, R283","N210, R288, R286, R287","R402, R404, R406, R401","R312, R408, R410, R310","N209","N215, N213","N217, N221, N222","R320, R316, R413, R314, R318, R412","R322, R325, R323","R421, R422, R420, R423","R726, R419, R328, R326, R418","R196, R194","R333, R730, R335, R334","R329, R330, R294, R332, R331, R293, N224","R289, R290, R291","R729, R727, R728","R336","R197","R414, R416, R415, R417"],"mode":"markers","type":"scatter","name":"BX","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[583,590,676,717,718,719,720,721,722,723,724,734,735,736,737,738,739,742,743,744,749,750,751,752,753,754,755,756,757,758,791,792,793,794,795,796,797,798,799,800],"y":[2,1,1,6,4,5,2,3,3,4,1,3,6,4,4,2,2,6,1,2,3,2,2,3,4,4,2,3,1,3,4,3,4,1,1,1,1,3,3,1],"text":["N702, R251","R238","R192","R133, A027, R550, R135, A022, N070","N529, A064, N520, N525","R219, A038, N523, H006, A034","R201, R101","A083, R111, R203","R106, A054, R103","A069, A047, R116, N094","H007","R226, N508, A030","R129, N080, R131, N076, N078, N512","R215, N086, A041, R217","R119, N089, R117, A043","R125, R123","R228, R231","N301, A013, R154, N056, N600, A010","N500","R247, N700","N303, N305, A002","R161B, R160","R164, R162","R170, R172, R168","N035, N030, R302, R301","R173, R174, R304, N026","N701, R249","R252, R254, R256","N024","R176, R178, N019","N017, N016A, R180, R182","N007A, N010, R183","R190, N003, R188, N002A","R258","N060","R306","N095","R308, N202, R309","R185, R186, N006A","N602"],"mode":"markers","type":"scatter","name":"M","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[824,838,843,844,845,846,848,849,853,873,874,875,876,877,878,1027,1028,1029,1030,1162,1164,1165,1166,1168,1216,1262],"y":[1,3,7,1,4,5,1,3,1,10,2,2,2,1,2,4,2,2,3,1,6,4,2,3,4,2],"text":["R533","R530, R529, R532","R527, N325A, R526, R528, N329, R525, N327","N330B","N331, N334B, N333A, N336","R521, N322, R523, R524, N318","K026","K022, K024, K025","N182","N401, R516, N312, R510, R507, R504, N307, R509, N309A, N603","R513, R514","N316, N315","R518, R519","R515","R512, R511","N195, N194, N196, N193","N192, N191","N184, N183","N185, N187, N186","N337","N131, N133, N181A, N137, N181, N134","J034, N604, J037, J035","N139, N141","J028, J030, J031","N340A, N339A, N343, N606","N338B, N605"],"mode":"markers","type":"scatter","name":"Q","marker":{"color":"rgba(231,138,195,1)","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[604,607],"y":[1,1],"text":["S101","S102"],"mode":"markers","type":"scatter","name":"SI","marker":{"color":"rgba(166,216,84,1)","line":{"color":"rgba(166,216,84,1)"}},"textfont":{"color":"rgba(166,216,84,1)"},"error_y":{"color":"rgba(166,216,84,1)"},"error_x":{"color":"rgba(166,216,84,1)"},"line":{"color":"rgba(166,216,84,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>This graph visualizes the distribution of subway or train stations across different zip codes in New York City. Each dot represents a zip code, with the x-axis indicating the numerical range of zip codes and the y-axis showing the number of stations in that zip code. The dots are color-coded by boroughs, with BK for Brooklyn, BX for Bronx, M for Manhattan, Q for Queens, and SI for Staten Island.</p>
<p>From the graph, it’s clear that there’s a wide range of station counts across the zip codes. Some zip codes, have a high number of stations, suggesting they are significant transit hubs within the borough of Brooklyn (BK). Other zip codes have fewer stations, which could be due to a variety of factors, such as lower population density or less demand for public transit.</p>
<p>This visualization can provide insights into the accessibility of public transportation across New York City and could be used to identify areas that might benefit from additional transit services.</p>
</section>
<section id="hai-1" class="level2" data-number="3.10">
<h2 data-number="3.10" class="anchored" data-anchor-id="hai-1"><span class="header-section-number">3.10</span> Hai</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>mtadata <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"mtadata.csv"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>mtadata<span class="sc">$</span>transit_timestamp <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(mtadata<span class="sc">$</span>transit_timestamp, <span class="at">format =</span> <span class="st">"%m/%d/%Y %I:%M:%S %p"</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>mtadata<span class="sc">$</span>hour <span class="ot">&lt;-</span> <span class="fu">format</span>(mtadata<span class="sc">$</span>transit_timestamp, <span class="st">"%H"</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># peak hours</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>peak_hours <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"07"</span>, <span class="st">"08"</span>, <span class="st">"09"</span>, <span class="st">"10"</span>, <span class="st">"17"</span>, <span class="st">"18"</span>, <span class="st">"19"</span>, <span class="st">"20"</span>)  </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Classifying as peak or non-peak</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>mtadata<span class="sc">$</span>travel_time <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(mtadata<span class="sc">$</span>hour <span class="sc">%in%</span> peak_hours, <span class="st">"Peak"</span>, <span class="st">"Non-Peak"</span>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Getting the top 10 stations for peak times</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>top_stations_peak <span class="ot">&lt;-</span> mtadata <span class="sc">%&gt;%</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(travel_time <span class="sc">==</span> <span class="st">"Peak"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(station_complex, <span class="at">wt =</span> ridership) <span class="sc">%&gt;%</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">top_n</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(station_complex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Selecting by n</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Getting the top 10 stations for non-peak times</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>top_stations_non_peak <span class="ot">&lt;-</span> mtadata <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(travel_time <span class="sc">==</span> <span class="st">"Non-Peak"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(station_complex, <span class="at">wt =</span> ridership) <span class="sc">%&gt;%</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">top_n</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(station_complex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Selecting by n</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating separate data frames for peak and non-peak times</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>peak_data <span class="ot">&lt;-</span> mtadata <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(station_complex <span class="sc">%in%</span> top_stations_peak, travel_time <span class="sc">==</span> <span class="st">"Peak"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(station_complex) <span class="sc">%&gt;%</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_ridership =</span> <span class="fu">sum</span>(ridership, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>non_peak_data <span class="ot">&lt;-</span> mtadata <span class="sc">%&gt;%</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(station_complex <span class="sc">%in%</span> top_stations_non_peak, travel_time <span class="sc">==</span> <span class="st">"Non-Peak"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(station_complex) <span class="sc">%&gt;%</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_ridership =</span> <span class="fu">sum</span>(ridership, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating plots for peak and non-peak times</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(peak_data, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(station_complex, total_ridership), <span class="at">y =</span> total_ridership)) <span class="sc">+</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">color =</span> <span class="st">"steelblue"</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 10 Busiest Stations During Peak Travel Times"</span>, <span class="at">x =</span> <span class="st">"Total Ridership"</span>, <span class="at">y =</span> <span class="st">"Station Complex"</span>) <span class="sc">+</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(non_peak_data, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(station_complex, total_ridership), <span class="at">y =</span> total_ridership)) <span class="sc">+</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">color =</span> <span class="st">"firebrick"</span>, <span class="at">fill =</span> <span class="st">"firebrick"</span>) <span class="sc">+</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 10 Busiest Stations During Non-Peak Travel Times"</span>, <span class="at">x =</span> <span class="st">"Total Ridership"</span>, <span class="at">y =</span> <span class="st">"Station Complex"</span>) <span class="sc">+</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-10-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The graph represents a quantitative comparison of station complexes based on the volume of ridership during the busiest periods of travel, such as rush hours. The vertical axis measures the total ridership in a numeric format (which appears to be in the hundreds of thousands based on the scale), and the horizontal axis lists the station complexes. This graph helps to identify which stations have the highest demand during peak hours, information that can be critical for transit authorities for resource allocation, scheduling, and improving services. It can also indicate the flow of commuter traffic and highlight potential areas for infrastructure development.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./data.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./d3graph.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Interactive graph - How Ridership changes over the Hours for Different Subway Routes</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">This book was built with <a href="https://quarto.org/">Quarto</a>.</div>
  </div>
</footer>



</body></html>